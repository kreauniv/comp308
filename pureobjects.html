
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pure objects (optional) &#8212; Comp308: Principles of Programming Languages v1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pure-objects-optional">
<h1>Pure objects (optional)<a class="headerlink" href="#pure-objects-optional" title="Permalink to this headline">¶</a></h1>
<p>In this section, we’ll work through a somewhat complete implementation of an interpreter
for a minimalistic “pure” object oriented language.</p>
<ol class="arabic simple">
<li><p>We’ll rely on message passing for all activity coordination.</p></li>
<li><p>We’ll bank on Racket’s support for symbols to express “programs” using this
language.</p></li>
</ol>
<p>In contrast to our earlier approach where we made every term type explicit, we’ll
choose the approach of representing our “message passing programs” using ordinary
Racket (nested) lists with imposed structure. This is because of the assumption stated
earlier – we <strong>only</strong> have objects and message passing, so those are the only things
we need to care about in our system. There <em>are</em> no other term types to deal with apart
from message passing and a construct to help notate a sequence of messages to various
objects!</p>
<p>We’ll take our usual structure of the recursive interpreter with support for
“environments”. For fun, we’ll call our language “OOPS” for “object oriented
programming system” :)</p>
<p>Some kinds of expressions we should be able to evaluate with this -</p>
<div class="highlight-racket notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">2</span> <span class="nb">+</span> <span class="mi">3</span><span class="p">)</span>       <span class="c1">; Should produce a number object with value 5</span>
<span class="p">(</span><span class="mi">42</span> <span class="n">describe</span><span class="p">)</span> <span class="c1">; Should produce a string object with value &quot;42&quot;</span>
<span class="p">(</span><span class="mi">2</span> <span class="nb">+</span> <span class="p">(</span><span class="mi">3</span> <span class="nb">*</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">; Should produce a number object with value 14</span>
<span class="p">((</span><span class="mi">7</span> <span class="nb">&lt;</span> <span class="p">(</span><span class="mi">3</span> <span class="nb">+</span> <span class="mi">5</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">block</span> <span class="p">()</span> <span class="p">(</span><span class="s2">&quot;yes&quot;</span> <span class="nb">print</span><span class="p">))</span>
       <span class="p">(</span><span class="n">block</span> <span class="p">()</span> <span class="p">(</span><span class="s2">&quot;no&quot;</span> <span class="nb">print</span><span class="p">)))</span>
              <span class="c1">; Should print &quot;yes&quot;</span>
<span class="p">((</span><span class="n">block</span> <span class="p">(</span><span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="nb">+</span> <span class="n">b</span><span class="p">))</span> <span class="n">invoke</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span>
              <span class="c1">; Should produce a number object with value 7</span>
</pre></div>
</div>
<div class="highlight-racket notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops</span> <span class="n">expr</span> <span class="n">bindings</span><span class="p">)</span>
  <span class="p">(</span><span class="k">cond</span>
    <span class="p">[(</span><span class="nb">symbol?</span> <span class="n">expr</span><span class="p">)</span>
     <span class="p">(</span><span class="k">match</span> <span class="p">(</span><span class="nb">assoc</span> <span class="n">expr</span> <span class="n">bindings</span><span class="p">)</span>
       <span class="p">[(</span><span class="nb">list</span> <span class="n">sym</span> <span class="n">val</span><span class="p">)</span> <span class="n">val</span><span class="p">]</span>
       <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">oops</span> <span class="s2">&quot;Bound symbol&quot;</span> <span class="n">expr</span><span class="p">)])]</span>
    <span class="p">[(</span><span class="n">oops-literal?</span> <span class="n">expr</span><span class="p">)</span>
     <span class="p">(</span><span class="n">oops-make-from-literal</span> <span class="n">expr</span><span class="p">)]</span>
    <span class="p">[(</span><span class="nb">list?</span> <span class="n">expr</span><span class="p">)</span>
     <span class="p">(</span><span class="k">when</span> <span class="p">(</span><span class="nb">empty?</span> <span class="n">expr</span><span class="p">)</span>
       <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">oops</span>
                             <span class="s2">&quot;Non-empty program&quot;</span>
                             <span class="n">expr</span><span class="p">))</span>
     <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">equal?</span> <span class="p">(</span><span class="nb">first</span> <span class="n">expr</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">block</span><span class="p">)</span>
         <span class="c1">; Support for blocks.</span>
         <span class="p">(</span><span class="n">oops-block</span> <span class="n">expr</span> <span class="n">bindings</span><span class="p">)</span>
         <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="n">oops-message?</span> <span class="n">expr</span><span class="p">)</span>
             <span class="p">(</span><span class="k">let</span> <span class="p">([</span><span class="n">target</span> <span class="p">(</span><span class="n">oops</span> <span class="p">(</span><span class="nb">first</span> <span class="n">expr</span><span class="p">)</span> <span class="n">bindings</span><span class="p">)]</span>
                   <span class="p">[</span><span class="n">message</span> <span class="p">(</span><span class="nb">second</span> <span class="n">expr</span><span class="p">)]</span>
                   <span class="p">[</span><span class="n">args</span> <span class="p">(</span><span class="nb">map</span> <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">subexpr</span><span class="p">)</span> <span class="p">(</span><span class="n">oops</span> <span class="n">subexpr</span> <span class="n">bindings</span><span class="p">))</span> <span class="p">(</span><span class="nb">rest</span> <span class="p">(</span><span class="nb">rest</span> <span class="n">expr</span><span class="p">)))])</span>
               <span class="p">(</span><span class="n">oops-send</span> <span class="n">target</span> <span class="n">message</span> <span class="n">args</span><span class="p">))</span>
             <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">oops</span>
                                   <span class="s2">&quot;Message send&quot;</span>
                                   <span class="n">expr</span><span class="p">)))]</span>
    <span class="p">[</span><span class="no">#t</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">oops</span>
                              <span class="s2">&quot;Message send expression as a list&quot;</span>
                              <span class="n">expr</span><span class="p">)]))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-message?</span> <span class="n">expr</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">symbol?</span> <span class="p">(</span><span class="nb">second</span> <span class="n">expr</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-literal?</span> <span class="n">expr</span><span class="p">)</span>
  <span class="p">(</span><span class="k">or</span> <span class="p">(</span><span class="nb">number?</span> <span class="n">expr</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">string?</span> <span class="n">expr</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">boolean?</span> <span class="n">expr</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-make-from-literal</span> <span class="n">expr</span><span class="p">)</span>
  <span class="p">(</span><span class="k">cond</span>
    <span class="p">[(</span><span class="nb">number?</span> <span class="n">expr</span><span class="p">)</span> <span class="p">(</span><span class="n">oops-number</span> <span class="n">expr</span><span class="p">)]</span>
    <span class="p">[(</span><span class="nb">string?</span> <span class="n">expr</span><span class="p">)</span> <span class="p">(</span><span class="n">oops-string</span> <span class="n">expr</span><span class="p">)]</span>
    <span class="p">[(</span><span class="nb">boolean?</span> <span class="n">expr</span><span class="p">)</span> <span class="p">(</span><span class="k">if</span> <span class="n">expr</span> <span class="n">oops-true</span> <span class="n">oops-false</span><span class="p">)]</span>
    <span class="p">[</span><span class="no">#t</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">oops-make-from-literal</span> <span class="s2">&quot;Valid literal&quot;</span> <span class="n">expr</span><span class="p">)]))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-block</span> <span class="n">expr</span> <span class="n">bindings</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="n">formals</span> <span class="p">(</span><span class="nb">second</span> <span class="n">expr</span><span class="p">))</span>
  <span class="p">(</span><span class="k">define</span> <span class="n">body</span> <span class="p">(</span><span class="nb">rest</span> <span class="p">(</span><span class="nb">rest</span> <span class="n">expr</span><span class="p">)))</span>
  <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">self</span> <span class="n">sel</span> <span class="o">.</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">(</span><span class="k">match</span> <span class="n">sel</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">invoke</span> <span class="p">(</span><span class="k">let</span> <span class="p">([</span><span class="n">newbindings</span> <span class="p">(</span><span class="n">extend-bindings</span> <span class="n">formals</span> <span class="n">args</span> <span class="n">bindings</span><span class="p">)])</span>
                 <span class="p">(</span><span class="n">oops-eval-seq</span> <span class="n">body</span> <span class="n">self</span> <span class="n">bindings</span><span class="p">))]</span>
      <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">Block</span> <span class="s2">&quot;Valid selector&quot;</span> <span class="n">sel</span><span class="p">)])))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-eval-seq</span> <span class="n">body</span> <span class="n">lastval</span> <span class="n">bindings</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">empty?</span> <span class="n">body</span><span class="p">)</span>
      <span class="n">lastval</span>
      <span class="p">(</span><span class="n">oops-eval-seq</span> <span class="p">(</span><span class="nb">rest</span> <span class="n">body</span><span class="p">)</span> <span class="p">(</span><span class="n">oops</span> <span class="p">(</span><span class="nb">first</span> <span class="n">body</span><span class="p">)</span> <span class="n">bindings</span><span class="p">)</span> <span class="n">bindings</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">extend-bindings</span> <span class="n">formals</span> <span class="nb">values</span> <span class="n">bindings</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">empty?</span> <span class="n">formals</span><span class="p">)</span>
      <span class="n">bindings</span>
      <span class="p">(</span><span class="n">extend-bindings</span> <span class="p">(</span><span class="nb">rest</span> <span class="n">formals</span><span class="p">)</span>
                       <span class="p">(</span><span class="nb">rest</span> <span class="nb">values</span><span class="p">)</span>
                       <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">first</span> <span class="n">formals</span><span class="p">)</span> <span class="p">(</span><span class="nb">first</span> <span class="nb">values</span><span class="p">))</span> <span class="n">bindings</span><span class="p">))))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-send</span> <span class="n">target</span> <span class="n">message</span> <span class="n">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">apply</span> <span class="n">target</span> <span class="p">(</span><span class="nb">cons</span> <span class="n">target</span> <span class="p">(</span><span class="nb">cons</span> <span class="n">message</span> <span class="n">args</span><span class="p">))))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="n">b</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="n">b</span> <span class="n">oops-true</span> <span class="n">oops-false</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="n">oops-true</span>
  <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">self</span> <span class="n">sel</span> <span class="o">.</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">(</span><span class="k">match</span> <span class="n">sel</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">if</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">invoke</span> <span class="nb">empty</span><span class="p">)]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">not</span> <span class="n">oops-false</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">and</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">equal?</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="n">oops-true</span><span class="p">)</span>
                <span class="n">oops-true</span>
                <span class="n">oops-false</span><span class="p">)]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">or</span> <span class="n">oops-true</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">describe</span> <span class="p">(</span><span class="n">oops-make-from-literal</span> <span class="s2">&quot;True&quot;</span><span class="p">)]</span>
      <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">Boolean</span> <span class="s2">&quot;Known selector&quot;</span> <span class="n">sel</span><span class="p">)])))</span>

<span class="p">(</span><span class="k">define</span> <span class="n">oops-false</span>
  <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">self</span> <span class="n">sel</span> <span class="o">.</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">(</span><span class="k">match</span> <span class="n">sel</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">if</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">second</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">invoke</span> <span class="nb">empty</span><span class="p">)]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">not</span> <span class="n">oops-true</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">and</span> <span class="n">oops-false</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">or</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">equal?</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="n">oops-true</span><span class="p">)</span>
               <span class="n">oops-true</span>
               <span class="n">oops-false</span><span class="p">)]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">describe</span> <span class="p">(</span><span class="n">oops-make-from-literal</span> <span class="s2">&quot;False&quot;</span><span class="p">)]</span>
      <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">Boolean</span> <span class="s2">&quot;Known selector&quot;</span> <span class="n">sel</span><span class="p">)])))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-string</span> <span class="n">value</span><span class="p">)</span>
  <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">self</span> <span class="n">sel</span> <span class="o">.</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">(</span><span class="k">match</span> <span class="n">sel</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">$value</span> <span class="n">value</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">==</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="p">(</span><span class="nb">string=?</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">print</span> <span class="p">(</span><span class="nb">display</span> <span class="n">value</span><span class="p">)</span> <span class="n">self</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">concat</span> <span class="p">(</span><span class="n">oops-make-from-literal</span> <span class="p">(</span><span class="nb">string-append</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">String</span> <span class="s2">&quot;Known selector&quot;</span> <span class="n">sel</span><span class="p">)])))</span>


<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-number</span> <span class="n">value</span><span class="p">)</span>
  <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">self</span> <span class="n">sel</span> <span class="o">.</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">(</span><span class="k">match</span> <span class="n">sel</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">$value</span> <span class="n">value</span><span class="p">]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">+</span> <span class="p">(</span><span class="n">oops-make-from-literal</span>
           <span class="p">(</span><span class="nb">+</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span> <span class="nb">empty</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">-</span> <span class="p">(</span><span class="n">oops-make-from-literal</span>
           <span class="p">(</span><span class="nb">-</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span> <span class="nb">empty</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">*</span> <span class="p">(</span><span class="n">oops-make-from-literal</span>
           <span class="p">(</span><span class="nb">*</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span> <span class="nb">empty</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">/</span> <span class="p">(</span><span class="n">oops-make-from-literal</span>
           <span class="p">(</span><span class="nb">/</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span> <span class="nb">empty</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">&lt;</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">&gt;</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">&lt;=</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="p">(</span><span class="nb">&lt;=</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">&gt;=</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="p">(</span><span class="nb">&gt;=</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">==</span> <span class="p">(</span><span class="n">oops-bool</span> <span class="p">(</span><span class="nb">equal?</span> <span class="n">value</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">describe</span> <span class="p">(</span><span class="n">oops-make-from-literal</span> <span class="p">(</span><span class="nb">number-&gt;string</span> <span class="n">value</span><span class="p">))]</span>
      <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">Number</span> <span class="s2">&quot;Known selector&quot;</span> <span class="n">sel</span><span class="p">)])))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="n">oops-array</span> <span class="n">n</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="n">vec</span> <span class="p">(</span><span class="nb">make-vector</span> <span class="n">n</span> <span class="n">oops-false</span><span class="p">))</span>
  <span class="p">(</span><span class="k">λ</span> <span class="p">(</span><span class="n">self</span> <span class="n">sel</span> <span class="o">.</span> <span class="n">args</span><span class="p">)</span>
    <span class="p">(</span><span class="k">match</span> <span class="n">sel</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">at</span> <span class="p">(</span><span class="nb">vector-ref</span> <span class="n">vec</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">))]</span>
      <span class="p">[</span><span class="o">&#39;</span><span class="ss">setAt</span> <span class="p">(</span><span class="nb">vector-set!</span> <span class="n">vec</span> <span class="p">(</span><span class="n">oops-send</span> <span class="p">(</span><span class="nb">first</span> <span class="n">args</span><span class="p">)</span> <span class="o">&#39;</span><span class="ss">$value</span><span class="p">)</span> <span class="p">(</span><span class="nb">second</span> <span class="n">args</span><span class="p">))</span> <span class="n">self</span><span class="p">]</span>
      <span class="p">[</span><span class="k">_</span> <span class="p">(</span><span class="nb">raise-argument-error</span> <span class="o">&#39;</span><span class="ss">Array</span> <span class="s2">&quot;Known selector&quot;</span> <span class="n">sel</span><span class="p">)])))</span>
</pre></div>
</div>
<p>Hello</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Comp308: Principles of Programming Languages</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="racket-intro.html">A quick introduction to Racket and Scheme</a></li>
<li class="toctree-l1"><a class="reference internal" href="lambda.html">Lambda - the everything</a></li>
<li class="toctree-l1"><a class="reference internal" href="piclang.html">A language for pictures</a></li>
<li class="toctree-l1"><a class="reference internal" href="machine.html">A mental model for the machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="growing.html">Growing the language</a></li>
<li class="toctree-l1"><a class="reference internal" href="fun.html">Functions and scope</a></li>
<li class="toctree-l1"><a class="reference internal" href="stacks-and-scope.html">Stacks and scope</a></li>
<li class="toctree-l1"><a class="reference internal" href="fun-in-piclang.html">Functions in PicLang</a></li>
<li class="toctree-l1"><a class="reference internal" href="mutations.html">Mutations</a></li>
<li class="toctree-l1"><a class="reference internal" href="control.html">Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="generators.html">Generators</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Srikumar K. S..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/pureobjects.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>